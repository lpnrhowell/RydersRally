(this["webpackJsonpryders-rally"]=this["webpackJsonpryders-rally"]||[]).push([[0],{173:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){},224:function(e,t,n){},225:function(e,t,n){},227:function(e,t,n){"use strict";n.r(t);var a=n(83),r=n.n(a);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(0),s=n(61),i=n(20),o=n(242),l=(n(173),n(213),n(32)),j=n(39),u=n(179),b=n(5),m={user:null};if(localStorage.getItem("jwtToken")){var d=Object(u.a)(localStorage.getItem("jwtToken"));1e3*d.exp<Date.now()?localStorage.removeItem("jwtToken"):m.user=d}var O=Object(c.createContext)({user:null,login:function(e){},logout:function(){}});function p(e,t){switch(t.type){case"LOGIN":return Object(j.a)(Object(j.a)({},e),{},{user:t.payload});case"LOGOUT":return Object(j.a)(Object(j.a)({},e),{},{user:null});default:return e}}function h(e){var t=Object(c.useReducer)(p,m),n=Object(l.a)(t,2),a=n[0],r=n[1];return Object(b.jsx)(O.Provider,Object(j.a)({value:{user:a.user,login:function(e){localStorage.setItem("jwtToken",e.token),r({type:"LOGIN",payload:e})},logout:function(){localStorage.removeItem("jwtToken"),r({type:"LOGOUT"})}}},e))}var g=n(194),x=["component"];var v=function(e){var t=e.component,n=Object(g.a)(e,x),a=Object(c.useContext)(O).user;return Object(b.jsx)(i.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return a?Object(b.jsx)(i.a,{to:"/"}):Object(b.jsx)(t,Object(j.a)({},e))}}))},f=n(246);n(219);var y=function(){var e=Object(c.useContext)(O),t=e.user,n=e.logout,a=window.location.pathname,r="/"===a?"home":a.substr(1),i=Object(c.useState)(r),o=Object(l.a)(i,2),j=o[0],u=o[1],m=function(e,t){var n=t.name;return u(n)};return t?Object(b.jsxs)(f.a,{pointing:!0,secondary:!0,size:"massive",color:"teal",children:[Object(b.jsx)(f.a.Item,{name:t.username,active:!0,as:s.b,to:"/"}),Object(b.jsxs)(f.a.Menu,{id:"navLink",position:"right",children:[Object(b.jsx)(f.a.Item,{name:"Create Event",id:"item",as:s.b,to:"/createEvent",onClick:m}),Object(b.jsx)(f.a.Item,{name:"logout",id:"item",onClick:n})]})]}):Object(b.jsxs)(f.a,{pointing:!0,secondary:!0,size:"massive",color:"teal",children:[Object(b.jsx)(f.a.Item,{id:"item",name:"home",active:"home"===j,onClick:m,as:s.b,to:"/"}),Object(b.jsxs)(f.a.Menu,{color:"teal",id:"navLink",position:"right",children:[Object(b.jsx)(f.a.Item,{id:"item",name:"login",active:"login"===j,onClick:m,as:s.b,to:"/login"}),Object(b.jsx)(f.a.Item,{id:"item",name:"register",active:"register"===j,onClick:m,as:s.b,to:"/register"})]})]})},w=n(250);n(220);function k(){return Object(b.jsx)("footer",{children:Object(b.jsxs)("div",{className:"share-btn-container",id:"share",children:[Object(b.jsx)("a",{href:"#",class:"facebook-btn",children:Object(b.jsx)("i",{class:"fab fa-facebook"})}),Object(b.jsx)("a",{href:"#",class:"twitter-btn",children:Object(b.jsx)("i",{class:"fab fa-twitter"})}),Object(b.jsx)("a",{href:"#",class:"instagram-btn",children:Object(b.jsx)("i",{class:"fab fa-instagram"})})]})})}var C,I,S=n(57),$=n(58),E=(Object($.a)(C||(C=Object(S.a)(["\n{\ngetClubs {\n  name\n  city\n  state\n\n}\n}\n"]))),Object($.a)(I||(I=Object(S.a)(["\n{\ngetEvents {\n    name\n    city_state\n    venue\n    ticket_price\n    img\n\n}\n}\n"])))),_=n(248),N=n(247),P=n(190);n(221);var T=function(){var e=Object(_.a)(E),t=e.loading,n=e.data;return n&&console.log(n),Object(b.jsx)(w.a.Row,{style:{marginTop:"50px"},children:t?Object(b.jsx)("h1",{children:"Loading events.."}):Object(b.jsx)(N.a.Group,{children:n.getEvents&&n.getEvents.map((function(e){return Object(b.jsxs)("div",{className:"event",children:[Object(b.jsx)(w.a.Column,{id:"eventInfo",children:Object(b.jsx)(P.a,{src:e.img,style:{width:"250px",height:"200px",marginTop:"10px"}})}),Object(b.jsx)(w.a.Column,{id:"eventInfo",style:{marginTop:"10px"},children:e.name}),Object(b.jsx)(w.a.Column,{id:"eventInfo",children:e.venue}),Object(b.jsx)(w.a.Column,{id:"eventInfo",children:e.city_state}),Object(b.jsxs)(w.a.Column,{id:"eventInfo",children:["\ud83c\udf9f ",e.ticket_price]})]})}))})})};n(224);var L,R=function(){return Object(c.useContext)(O).user,Object(b.jsxs)("div",{className:"homepage",children:[Object(b.jsxs)(w.a,{columns:2,children:[Object(b.jsx)(w.a.Row,{className:"page-title",children:Object(b.jsx)("h1",{id:"title",children:"Ryders Rally"})}),Object(b.jsx)(T,{})]}),Object(b.jsx)(k,{})]})},U=n(244),G=n(249),Q=n(245),V=(n(225),n(125)),z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(c.useState)(t),a=Object(l.a)(n,2),r=a[0],s=a[1],i=function(e){s(Object(j.a)(Object(j.a)({},r),{},Object(V.a)({},e.target.name,e.target.value)))},o=function(t){t.preventDefault(),e()};return{onChange:i,onSubmit:o,values:r}};var A,B=Object($.a)(L||(L=Object(S.a)(["\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      id\n      email\n      username\n      createdAt\n      token\n    }\n  }\n"]))),q=function(e){var t=Object(c.useContext)(O),n=Object(c.useState)({}),a=Object(l.a)(n,2),r=a[0],s=a[1],i=z((function(){p()}),{username:"",password:""}),o=i.onChange,j=i.onSubmit,u=i.values,m=Object(Q.a)(B,{update:function(n,a){var r=a.data.login;t.login(r),e.history.push("/")},onError:function(e){s(e.graphQLErrors[0].extensions.exception.errors)},variables:u}),d=Object(l.a)(m,2),p=d[0],h=d[1].loading;return Object(b.jsxs)("div",{className:"form-container",children:[Object(b.jsxs)(U.a,{onSubmit:j,noValidate:!0,className:h?"loading":"",children:[Object(b.jsx)("h1",{children:"Login"}),Object(b.jsx)(U.a.Input,{label:"Username",placeholder:"Username..",name:"username",type:"text",value:u.username,error:!!r.username,onChange:o}),Object(b.jsx)(U.a.Input,{label:"Password",placeholder:"Password..",name:"password",type:"password",value:u.password,error:!!r.password,onChange:o}),Object(b.jsx)(G.a,{type:"submit",primary:!0,children:"Login"})]}),Object.keys(r).length>0&&Object(b.jsx)("div",{className:"ui error message",children:Object(b.jsx)("ul",{className:"list",children:Object.values(r).map((function(e){return Object(b.jsx)("li",{children:e},e)}))})})]})};var D,J=Object($.a)(A||(A=Object(S.a)(["\n  mutation register(\n    $username: String!\n    $email: String!\n    $password: String!\n    $confirmPassword: String!\n  ) {\n    register(\n      registerInput: {\n        username: $username\n        email: $email\n        password: $password\n        confirmPassword: $confirmPassword\n      }\n    ) {\n      id\n      email\n      username\n      createdAt\n      token\n    }\n  }\n"]))),M=function(e){var t=Object(c.useContext)(O),n=Object(c.useState)({}),a=Object(l.a)(n,2),r=a[0],s=a[1],i=z((function(){p()}),{username:"",email:"",password:"",confirmPassword:""}),o=i.onChange,j=i.onSubmit,u=i.values,m=Object(Q.a)(J,{update:function(n,a){var r=a.data.register;t.login(r),e.history.push("/")},onError:function(e){s(e.graphQLErrors[0].extensions.exception.errors)},variables:u}),d=Object(l.a)(m,2),p=d[0],h=d[1].loading;return Object(b.jsxs)("div",{className:"form-container",children:[Object(b.jsxs)(U.a,{onSubmit:j,noValidate:!0,className:h?"loading":"",children:[Object(b.jsx)("h1",{children:"Register"}),Object(b.jsx)(U.a.Input,{label:"Username",placeholder:"Username..",name:"username",type:"text",value:u.username,error:!!r.username,onChange:o}),Object(b.jsx)(U.a.Input,{label:"Email",placeholder:"Email..",name:"email",type:"email",value:u.email,error:!!r.email,onChange:o}),Object(b.jsx)(U.a.Input,{label:"Password",placeholder:"Password..",name:"password",type:"password",value:u.password,error:!!r.password,onChange:o}),Object(b.jsx)(U.a.Input,{label:"Confirm Password",placeholder:"Confirm Password..",name:"confirmPassword",type:"password",value:u.confirmPassword,error:!!r.confirmPassword,onChange:o}),Object(b.jsx)(G.a,{type:"submit",primary:!0,children:"Register"})]}),Object.keys(r).length>0&&Object(b.jsx)("div",{className:"ui error message",children:Object(b.jsx)("ul",{className:"list",children:Object.values(r).map((function(e){return Object(b.jsx)("li",{children:e},e)}))})})]})},W=n(192),F=Object($.a)(D||(D=Object(S.a)(["\n  mutation createEvent(\n        $name: String!\n        $venue: String!\n        $city_state: String!\n        $ticket_price: String!\n        $img:String\n  ) {\n    createEvent(\n      eventInput: {\n        name: $name\n        venue: $venue\n        city_state: $city_state\n        ticket_price: $ticket_price\n        img:$img\n      }\n    ) {\n        name\n        venue\n        city_state\n        ticket_price\n        img\n    }\n  }\n"]))),H=function(e){Object(c.useContext)(O);var t=Object(c.useState)({}),n=Object(l.a)(t,2),a=n[0],r=n[1],s=z((function(){d()}),{name:"",venue:"",city_state:"",ticket_price:"",img:""}),i=s.onChange,o=s.onSubmit,j=s.values,u=Object(Q.a)(F,{variables:j,update:function(e,t){var n=e.readQuery({query:E});n.getEvents=[t.data.createEvent].concat(Object(W.a)(n.getEvents)),e.writeQuery({query:E,data:n}),j.img="",j.name="",j.ticket_price="",j.city_state="",j.venue=""},onError:function(e){r(e.graphQLErrors[0].extensions.exception.errors)}}),m=Object(l.a)(u,2),d=m[0];m[1].error;return Object(b.jsxs)("div",{className:"form-container",children:[Object(b.jsxs)(U.a,{onSubmit:o,noValidate:!0,children:[Object(b.jsx)("h1",{children:"Create Event"}),Object(b.jsx)(U.a.Input,{label:"Name",placeholder:"Name of event..",name:"name",type:"text",value:j.name,error:!!a.name,onChange:i}),Object(b.jsx)(U.a.Input,{label:"Venue",placeholder:"Venue..",name:"venue",type:"text",value:j.venue,error:!!a.venue,onChange:i}),Object(b.jsx)(U.a.Input,{label:"City-State",placeholder:"City and State..",name:"city_state",type:"text",value:j.city_state,error:!!a.city_state,onChange:i}),Object(b.jsx)(U.a.Input,{label:"Ticket Price",placeholder:"Ticket Price..",name:"ticket_price",type:"text",value:j.ticket_price,error:!!a.ticket_price,onChange:i}),Object(b.jsx)(U.a.Input,{label:"Img",placeholder:"Img..",name:"img",type:"text",value:j.img,error:!!a.img,onChange:i}),Object(b.jsx)(G.a,{type:"submit",primary:!0,children:"Create Event"})]}),Object.keys(a).length>0&&Object(b.jsx)("div",{className:"ui error message",children:Object(b.jsx)("ul",{className:"list",children:Object.values(a).map((function(e){return Object(b.jsx)("li",{children:e},e)}))})})]})};var K=function(){return Object(b.jsx)(h,{children:Object(b.jsx)(s.a,{children:Object(b.jsxs)(o.a,{children:[Object(b.jsx)(y,{}),Object(b.jsx)(i.b,{exact:!0,path:"/",component:R}),Object(b.jsx)(v,{exact:!0,path:"/login",component:q}),Object(b.jsx)(v,{exact:!0,path:"/register",component:M}),Object(b.jsx)(i.b,{exact:!0,path:"/createEvent",component:H})]})})})},X=n(187),Y=n(191),Z=n(193),ee=n(243),te=n(186),ne=Object(Z.a)({uri:"https://rydersrally.herokuapp.com/"}),ae=Object(te.a)((function(){var e=localStorage.getItem("jwtToken");return{headers:{Authorization:e?"Bearer ".concat(e):""}}})),re=new X.a({link:ae.concat(ne),cache:new Y.a}),ce=Object(b.jsx)(ee.a,{client:re,children:Object(b.jsx)(K,{})});r.a.render(ce,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[227,1,2]]]);
//# sourceMappingURL=main.6c9e6142.chunk.js.map